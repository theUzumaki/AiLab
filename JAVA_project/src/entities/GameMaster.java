package entities;

import java.util.List;

import javax.imageio.ImageIO;

import java.awt.Graphics;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.util.ArrayList;

public class GameMaster {

    private static GameMaster instance;
    private final int STEP = 2;
    private int rows, columns, sizetile;
    
    public List<AnimatedEntity> animatedEntities = new ArrayList<>();
    public List<BackgroundEntity> bgEntities = new ArrayList<>();
    
    private int[][] tilemap;

    private GameMaster(int TILE, int ROWS, int COLUMNS) {
    	
    	animatedEntities.add(Jason.getInstance(20, 20, 1, 1, STEP, TILE));
    	
    	this.rows= ROWS;
    	this.columns = COLUMNS;
    	this.sizetile = TILE;
    	
    	loadTileMap(0);
    	loadStage();
    	
    }

    public static synchronized GameMaster getInstance(int TILE, int ROWS, int COLUMNS) {
        if (instance == null) {
            instance = new GameMaster(TILE, ROWS, COLUMNS);
        }
        return instance;
    }
  
    private void loadStage() {
    	
    	int x = 0;
    	
    	for (int[] row : tilemap) {
    		int y = 0;
    		
    		for (int element : row) {
    			
    			switch (element) {
    			
    			case 0: bgEntities.add(new Grass(y * sizetile, x * sizetile, 1, 1, sizetile)); break;
    			case 1: bgEntities.add(new Pine(y * sizetile, x * sizetile, 1, 1, sizetile)); break;
    		
    			}
    			y += 1;
    		}
    		x+= 1;
    	}
    	
    }
    
    private void loadTileMap(int stage) {
    	
    	switch (stage) {
    	
    	case 0:
    		
    		tilemap = new int[][]{
    			
    				{ 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 },
    				{ 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
    				{ 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
    				{ 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
    				{ 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
    				{ 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
    				{ 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
    				{ 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
    				{ 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
    				{ 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
    				{ 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
    				{ 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
    				{ 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
    				{ 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
    				{ 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 }
    				
    		};
    	
    	}
    	
    }
	
}
